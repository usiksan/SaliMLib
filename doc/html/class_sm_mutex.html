<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SaliMLib: SmMutex Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SaliMLib
   &#160;<span id="projectnumber">0.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_sm_mutex-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">SmMutex Class Reference<div class="ingroups"><a class="el" href="group___c_plus_plus_part.html">SaliMLib core library</a> &raquo; <a class="el" href="group__mutex.html">SaliMLib Mutex</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>The <a class="el" href="class_sm_mutex.html" title="The SmMutex class Helper class for guard some resource against sharing. ">SmMutex</a> class Helper class for guard some resource against sharing.  
 <a href="class_sm_mutex.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_sali_m_core_8h_source.html">SaliMCore.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a29496127f8396990b46a456dcde5e1e5"><td class="memItemLeft" align="right" valign="top"><a id="a29496127f8396990b46a456dcde5e1e5"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sm_mutex.html#a29496127f8396990b46a456dcde5e1e5">SmMutex</a> ()</td></tr>
<tr class="memdesc:a29496127f8396990b46a456dcde5e1e5"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="class_sm_mutex.html" title="The SmMutex class Helper class for guard some resource against sharing. ">SmMutex</a> Construct initialy not busy resource. <br /></td></tr>
<tr class="separator:a29496127f8396990b46a456dcde5e1e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2166ebe31e9080e65f8302a5bf244e3a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sm_mutex.html#a2166ebe31e9080e65f8302a5bf244e3a">isLocked</a> () const</td></tr>
<tr class="memdesc:a2166ebe31e9080e65f8302a5bf244e3a"><td class="mdescLeft">&#160;</td><td class="mdescRight">isLocked Check if resource is busy  <a href="#a2166ebe31e9080e65f8302a5bf244e3a">More...</a><br /></td></tr>
<tr class="separator:a2166ebe31e9080e65f8302a5bf244e3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac56b224cea74f9cc3b8522e28d70e8b2"><td class="memItemLeft" align="right" valign="top"><a id="ac56b224cea74f9cc3b8522e28d70e8b2"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sm_mutex.html#ac56b224cea74f9cc3b8522e28d70e8b2">lock</a> ()</td></tr>
<tr class="memdesc:ac56b224cea74f9cc3b8522e28d70e8b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">lock Try lock resource. If resource is busy then it wait until it will be free. If resource is free it locked <br /></td></tr>
<tr class="separator:ac56b224cea74f9cc3b8522e28d70e8b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2e09abbba0468941cf4ad8f2206f2fd"><td class="memItemLeft" align="right" valign="top"><a id="ac2e09abbba0468941cf4ad8f2206f2fd"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_sm_mutex.html#ac2e09abbba0468941cf4ad8f2206f2fd">unlock</a> ()</td></tr>
<tr class="memdesc:ac2e09abbba0468941cf4ad8f2206f2fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">unlock Unlocks resource <br /></td></tr>
<tr class="separator:ac2e09abbba0468941cf4ad8f2206f2fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The <a class="el" href="class_sm_mutex.html" title="The SmMutex class Helper class for guard some resource against sharing. ">SmMutex</a> class Helper class for guard some resource against sharing. </p>
<p>Usually, mutexes are used to block access to a specific resource by other tasks while the resource is occupied by the current task. In systems with preempting multitasking, mutexes are system objects provided by the operating system. This complexity is due to the need for atomicity of operations with mutexes and their direct impact on the internal queues and lists of the operating system.</p>
<p>In the SaliMLib system, a regular logical variable "associated" with a resource can act as a mutex.</p>
<p>For example, consider an SPI port that can access multiple external devices. In this case, the mutex can be organized as follows: </p><div class="fragment"><div class="line"><span class="comment">//SPI structure from ST library</span></div><div class="line">SPI_HandleTypeDef hspi3;</div><div class="line"></div><div class="line"><span class="comment">//Variable which acts as SPI3 port locker</span></div><div class="line"><span class="keywordtype">bool</span>              spi3Busy;</div><div class="line"></div><div class="line"><span class="comment">//Function to lock resurs</span></div><div class="line"><span class="keywordtype">void</span> spi3Lock()</div><div class="line">  {</div><div class="line">  <span class="keywordflow">if</span>( spi3Busy )</div><div class="line">    <a class="code" href="group__wait_functions.html#ga5b665a5b7388321bf7544648d638882b">smWaitBoolFalse</a>( &amp;spi3Busy );</div><div class="line">  spi3Busy = <span class="keyword">true</span>;</div><div class="line">  }</div><div class="line"></div><div class="line"><span class="comment">//Function to unlock resusr</span></div><div class="line"><span class="keyword">inline</span> <span class="keywordtype">void</span> spi3UnLock() { spi3Busy = <span class="keyword">false</span>; }</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> f()</div><div class="line">  {</div><div class="line">  <span class="comment">//Lock resurs</span></div><div class="line">  spi3Lock();</div><div class="line"></div><div class="line">  <span class="comment">//Do something</span></div><div class="line"></div><div class="line">  <span class="comment">//Unlock resource</span></div><div class="line">  spi3UnLock();</div><div class="line">  }</div></div><!-- fragment --><p>To support mutexes, SaliMLib has The <a class="el" href="class_sm_mutex.html" title="The SmMutex class Helper class for guard some resource against sharing. ">SmMutex</a> helper class. It is built on a boolean variable and its internal implementation is identical to the one presented above.</p>
<p>Using the <a class="el" href="class_sm_mutex.html" title="The SmMutex class Helper class for guard some resource against sharing. ">SmMutex</a> class, the above snippet will look like this: </p><div class="fragment"><div class="line"><span class="comment">//SPI structure from ST library</span></div><div class="line">SPI_HandleTypeDef hspi3;</div><div class="line"><span class="comment">//Mutex which acts as SPI3 port locker</span></div><div class="line"><a class="code" href="class_sm_mutex.html">SmMutex</a>  spi3Mutex;</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> f()</div><div class="line">  {</div><div class="line">  <span class="comment">//Lock resource</span></div><div class="line">  spi3Mutex.<a class="code" href="class_sm_mutex.html#ac56b224cea74f9cc3b8522e28d70e8b2">lock</a>();</div><div class="line"></div><div class="line">  <span class="comment">//Do something</span></div><div class="line"></div><div class="line">  <span class="comment">//Unlock resusr</span></div><div class="line">  spi3Mutex.<a class="code" href="class_sm_mutex.html#ac2e09abbba0468941cf4ad8f2206f2fd">unlock</a>();</div><div class="line">  }</div></div><!-- fragment --><dl class="section see"><dt>See also</dt><dd><a class="el" href="class_sm_mutex_locker.html" title="The SmMutexLocker class Helper class for automatic lock and unlock resource by using SmMutex...">SmMutexLocker</a>, <a class="el" href="class_sm_semaphor.html" title="The SmSemaphor class Helper class for guard some resource against multiple sharing. ">SmSemaphor</a> </dd></dl>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a2166ebe31e9080e65f8302a5bf244e3a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2166ebe31e9080e65f8302a5bf244e3a">&#9670;&nbsp;</a></span>isLocked()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool SmMutex::isLocked </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>isLocked Check if resource is busy </p>
<dl class="section return"><dt>Returns</dt><dd>true when resource is busy </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>/home/asibilev/work/SaliMLib/source/<a class="el" href="_sali_m_core_8h_source.html">SaliMCore.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
