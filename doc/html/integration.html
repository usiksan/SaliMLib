<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SaliMLib: SaliMLib in-project integration</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SaliMLib
   &#160;<span id="projectnumber">0.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">SaliMLib in-project integration </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Using the library involves including its source code in the target project. Just copy two files of the platform-independent part: <a class="el" href="_sali_m_core_8h_source.html">SaliMCore.h</a> and SaliMCore.cpp to your project. For the platform-dependent part, select the file from the port directory that corresponds to your hardware and the compiler used.</p>
<p>Add the following line to the system tick timer handler: </p><div class="fragment"><div class="line"><a class="code" href="group__cpart.html#ga4a9031c426fd5947ec4e562017059e44">smTickCount</a>++; <span class="comment">// Increment of the system tick counter</span></div></div><!-- fragment --><p>In the main function, you must also add system initialization </p><div class="fragment"><div class="line"><a class="code" href="group__cpart.html#ga905977dc69d620a91f885e701aab2acf">smInit</a>(100);</div></div><!-- fragment --><p> where 100 is the stack size (in 32-bit words) for the default task.</p>
<p>For example arm cortex </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> SysTick_Handler(<span class="keywordtype">void</span>)</div><div class="line">  {</div><div class="line">  <a class="code" href="group__cpart.html#ga4a9031c426fd5947ec4e562017059e44">smTickCount</a>++; <span class="comment">// Increment of the system tick counter</span></div><div class="line">  HAL_IncTick();</div><div class="line">  }</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> main(<span class="keywordtype">void</span>)</div><div class="line">  {</div><div class="line">  <span class="comment">//All initialisation</span></div><div class="line">  ...</div><div class="line">  <span class="comment">//Initialisation of SaliMLib</span></div><div class="line">  <span class="comment">//Any of SmWaitXXX functions must be called AFTER smInit</span></div><div class="line">  <a class="code" href="group__cpart.html#ga905977dc69d620a91f885e701aab2acf">smInit</a>(100);</div><div class="line"></div><div class="line">  <span class="comment">//Main loop</span></div><div class="line">  <span class="keywordflow">while</span>(1) {</div><div class="line">    ...</div><div class="line">    }</div><div class="line">  }</div></div><!-- fragment --><dl class="section warning"><dt>Warning</dt><dd>Any of SmWaitXXX functions must be called AFTER smInit</dd></dl>
<p>For efficiency reasons, the SaliMLib library does not use dynamic memory allocation. It completely omits the new and delete operations. Therefore, the number of tasks in one project is fixed. This number is set by the SM_TASK_MAX global macro and is set to 8 tasks by default. To change this number, define the global macro SM_TASK_MAX with the required number of tasks, for example: </p><div class="fragment"><div class="line"><span class="preprocessor">#define SM_TASK_MAX 10</span></div></div><!-- fragment --><p>By default, the use of namespaces is disabled in the SaliMLib library. Therefore, all library functions and classes are visible in the global namespace. Due to the fact that the library is included in the project may be a conflict of names. To avoid this, just enable the use of a namespace in the library. To do this, define the global SM_NAMESPACE macro with the desired namespace ID. For example: </p><div class="fragment"><div class="line"><span class="preprocessor">#define SM_NAMESPACE MySpaceSaliMLib</span></div></div><!-- fragment --><dl class="section see"><dt>See also</dt><dd><a class="el" href="group__cpart.html" title="This elements used to integrate SaliMLib into your C-based project. ">Interface with C programm</a> </dd></dl>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
