<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SaliMLib: SaliMLib functions for task creation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SaliMLib
   &#160;<span id="projectnumber">0.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">SaliMLib functions for task creation<div class="ingroups"><a class="el" href="group___c_plus_plus_part.html">SaliMLib core library</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>This functions used for task creation.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:ga8e40ae0c931e74c8a3c2c7101d7e1b2d"><td class="memItemLeft" align="right" valign="top"><a id="ga8e40ae0c931e74c8a3c2c7101d7e1b2d"></a>
using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__task_functions.html#ga8e40ae0c931e74c8a3c2c7101d7e1b2d">SmTaskFunction</a> = void(*)(void *arg)</td></tr>
<tr class="memdesc:ga8e40ae0c931e74c8a3c2c7101d7e1b2d"><td class="mdescLeft">&#160;</td><td class="mdescRight">SmTaskFunction Task function prototype. It take one argument as pointer to void and return nothing. <br /></td></tr>
<tr class="separator:ga8e40ae0c931e74c8a3c2c7101d7e1b2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga22cf7c184d00767bac878b42ffa364f5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__task_functions.html#ga22cf7c184d00767bac878b42ffa364f5">smTaskCreate</a> (unsigned stackCellSize, void *arg, <a class="el" href="group__task_functions.html#ga8e40ae0c931e74c8a3c2c7101d7e1b2d">SmTaskFunction</a> taskFunction, bool critic=false)</td></tr>
<tr class="memdesc:ga22cf7c184d00767bac878b42ffa364f5"><td class="mdescLeft">&#160;</td><td class="mdescRight">smTaskCreate Creates new task with stackCellSize stack size and taskFunctor as task entry point  <a href="#ga22cf7c184d00767bac878b42ffa364f5">More...</a><br /></td></tr>
<tr class="separator:ga22cf7c184d00767bac878b42ffa364f5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5b4195439c8a49b7d078d560fdf3c6be"><td class="memTemplParams" colspan="2">template&lt;class SmClass &gt; </td></tr>
<tr class="memitem:ga5b4195439c8a49b7d078d560fdf3c6be"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="group__task_functions.html#ga5b4195439c8a49b7d078d560fdf3c6be">smTaskCreateClass</a> (unsigned stackCellSize, SmClass *cls, void(*taskFunction)(SmClass *cls))</td></tr>
<tr class="memdesc:ga5b4195439c8a49b7d078d560fdf3c6be"><td class="mdescLeft">&#160;</td><td class="mdescRight">smTaskCreateClass Template for automatic conversion of task function argument. It simply converts class pointer cls to void for task creation argument and task entry function prototype  <a href="#ga5b4195439c8a49b7d078d560fdf3c6be">More...</a><br /></td></tr>
<tr class="separator:ga5b4195439c8a49b7d078d560fdf3c6be"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>This functions used for task creation. </p>
<p>Tasks are quasi-parallel functions. "Quasi" means that since the processor has one core, it performs one task at the same time, however, due to the rapid switching between tasks, the illusion of their parallel execution is created.</p>
<p>You can create a task using the smTaskCreate function: </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> taskFunction( <span class="keywordtype">void</span>* )</div><div class="line">  {</div><div class="line">  ...<span class="comment">//Some execution with periodic call one of smWaitXxx functions</span></div><div class="line">  }</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> exampleOfTaskCreation()</div><div class="line">  {</div><div class="line">  <span class="comment">//Create first task</span></div><div class="line">  <a class="code" href="group__task_functions.html#ga22cf7c184d00767bac878b42ffa364f5">smTaskCreate</a>( 300, <span class="keyword">nullptr</span>, taskFunction );</div><div class="line">  <span class="comment">//Create second task</span></div><div class="line">  <a class="code" href="group__task_functions.html#ga22cf7c184d00767bac878b42ffa364f5">smTaskCreate</a>( 300, <span class="keyword">nullptr</span>, taskFunction );</div><div class="line">  <span class="comment">//Some execution with call one of smWaitXxx functions</span></div><div class="line">  ...</div><div class="line">  }</div></div><!-- fragment --><p>In this example, taskFunction is a task function that will be executed in parallel with other tasks.</p>
<p>To create a task, call the smTaskCreate function and pass the task function to it. Multiple tasks can be created using the same task function. In any case, these will be two (or several) independent tasks. When creating a task, the size of the task stack in 32-bit words and an arbitrary parameter passed to the task function are also passed.</p>
<p>When creating a task, an arbitrary parameter is passed, which is then passed to the task function. For example: </p><div class="fragment"><div class="line"><span class="keywordtype">void</span> pinSet( <span class="keywordtype">int</span> pin );</div><div class="line"><span class="keywordtype">void</span> pinReset( <span class="keywordtype">int</span> pin );</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> taskBlinkPin( <span class="keywordtype">int</span> *pinIndex )</div><div class="line">  {</div><div class="line">  <span class="keywordflow">while</span>(<span class="keyword">true</span>) {</div><div class="line">    <span class="comment">//Set pin to 1</span></div><div class="line">    pinSet( *pinIndex );</div><div class="line">    <span class="comment">//Wait time interval</span></div><div class="line">    <a class="code" href="group__wait_functions.html#ga542182b81ea8e1653720b0864c9c7705">smWaitTick</a>(300);</div><div class="line">    <span class="comment">//Reset pin to 0</span></div><div class="line">    pinReset( *pinIndex );</div><div class="line">    <span class="comment">//Wait time interval</span></div><div class="line">    <a class="code" href="group__wait_functions.html#ga542182b81ea8e1653720b0864c9c7705">smWaitTick</a>(300);</div><div class="line">    }</div><div class="line">  }</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> example()</div><div class="line">  {</div><div class="line">  <span class="keywordtype">int</span> pin1 = 1;</div><div class="line">  <span class="keywordtype">int</span> pin2 = 2;</div><div class="line">  smTaskCreateClass&lt;int&gt;( 300, &amp;pin1, taskBlinkPin );</div><div class="line">  smTaskCreateClass&lt;int&gt;( 300, &amp;pin2, taskBlinkPin );</div><div class="line">  }</div></div><!-- fragment --><p>Here, the taskBlinkPin task flashes an output whose number is passed to it as a parameter. And the actual output number for a specific task is specified when creating the task. For this purpose, the example uses the template of the smTaskCreateClass function, which converts the parameter type to the void type and calls smTaskCreate. If your task function uses a parameter, it is preferable to use a template before converting the type itself, since the template does this consistently, which ultimately reduces the likelihood of errors.</p>
<p>The issue of passing multiple parameters is solved by passing a pointer to a structure where multiple parameters can be described. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga22cf7c184d00767bac878b42ffa364f5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga22cf7c184d00767bac878b42ffa364f5">&#9670;&nbsp;</a></span>smTaskCreate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void smTaskCreate </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>stackCellSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__task_functions.html#ga8e40ae0c931e74c8a3c2c7101d7e1b2d">SmTaskFunction</a>&#160;</td>
          <td class="paramname"><em>taskFunction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>critic</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>smTaskCreate Creates new task with stackCellSize stack size and taskFunctor as task entry point </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stackCellSize</td><td>Task stack size in 32-bit cell </td></tr>
    <tr><td class="paramname">arg</td><td>Param for task, may any or nothing </td></tr>
    <tr><td class="paramname">taskFunction</td><td>Task entry point function </td></tr>
    <tr><td class="paramname">critic</td><td>Define priority level for task. All task devided into two sections: critic tasks and all other. Critic task handled as fast as possible and suit for polling tasks. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga5b4195439c8a49b7d078d560fdf3c6be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5b4195439c8a49b7d078d560fdf3c6be">&#9670;&nbsp;</a></span>smTaskCreateClass()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class SmClass &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void smTaskCreateClass </td>
          <td>(</td>
          <td class="paramtype">unsigned&#160;</td>
          <td class="paramname"><em>stackCellSize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">SmClass *&#160;</td>
          <td class="paramname"><em>cls</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(SmClass *cls)&#160;</td>
          <td class="paramname"><em>taskFunction</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>smTaskCreateClass Template for automatic conversion of task function argument. It simply converts class pointer cls to void for task creation argument and task entry function prototype </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">stackCellSize</td><td>Task stack size in 32-bit cell </td></tr>
    <tr><td class="paramname">cls</td><td>Class pointer param for task </td></tr>
    <tr><td class="paramname">taskFunction</td><td>Task entry point function with Class pointer as argument </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
